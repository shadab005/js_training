<!DOCTYPE html>
<html>
  <head>
    <script>
      /*
      * ES7 introduce async and await syntax
      * Asycn await => syntactic sugar over promise
      * It makes the asynchronous syntax look prettier and easier to understand, without the .then and .catch.
      * Functions marked as async become asynchronous and automatically return promises (Check)
      * Functions marked as async get to use the await keyword
      * 
      * If a function returns await I can make it to await using this keyword
      * 
      */


      async function delayAsyncStyle(timeout) {
        await delay(timeout)
        return 3
      }
      //Function that returns promise
      function delay(timeout) {
        return new Promise((resolve, reject) => {
          if(isNaN(timeout)) {
            reject(new Error("delay requires a valid number"))
          } else {
          setTimeout(resolve, timeout)
          }
        })
      }

      // delayAsyncStyle(1000)
      //  .then(() => console.log("Hello Mr"))
      //  .catch(e => console.error(e))

      //Note: Async function returns Promise as you can see from value of x
      //But id we write await keyword and call the async function then it unwraps the value from inside that and in this case it prints 3
      (async () => {
      x = delayAsyncStyle(1000)
      delay(3000).then(() => console.log(x)).catch(e => console.error(e))
      y = await delayAsyncStyle(1000)
      delay(4000).then(() => console.log(y)).catch(e => console.error(e))
      })()
    </script>
  </head>

  <body>
    HELLO
  </body>
</html>
